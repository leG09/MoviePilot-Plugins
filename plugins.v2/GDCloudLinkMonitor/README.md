# GDCloudLinkMonitor - 多目录实时监控插件

## 功能概述

GDCloudLinkMonitor 是一个强大的多目录实时监控插件，专门用于监控云盘目录的文件变化，并自动转移媒体文件。该插件支持轮询分发和智能网盘限制检测功能。

## 主要特性

### 🎯 核心功能
- **多目录监控**: 支持同时监控多个目录的文件变化
- **自动转移**: 自动识别媒体文件并转移到指定目录
- **轮询分发**: 智能轮询分发到多个目标目录，实现负载均衡
- **网盘限制检测**: 自动检测网盘状态，避免向被限制的网盘上传文件

### 🔧 高级功能
- **历史一致性**: 同一剧集/电影系列保持在同一目录
- **缓存优化**: 避免频繁检测，提高性能
- **容错处理**: 当所有网盘都被限制时，会记录错误并跳过文件
- **多种转移方式**: 支持移动、复制、软链接、硬链接等多种转移方式

## 安装配置

### 1. 基本配置
- **启用插件**: 开启插件功能
- **监控目录**: 配置需要监控的目录路径
- **目标目录**: 配置文件转移的目标目录

### 2. 网盘限制检测配置
- **启用网盘限制检测**: 开启网盘状态检测功能
- **CloudDrive CLI路径**: 设置 clouddrive-cli 工具路径
- **测试文件路径**: 设置用于检测的小文件路径
- **检测间隔**: 设置检测间隔时间（默认300秒）

### 3. 高级配置
- **转移方式**: 选择文件转移方式（move/copy/link/softlink等）
- **刮削设置**: 配置是否进行媒体刮削
- **通知设置**: 配置转移完成后的通知方式

## 使用示例

### 监控目录配置
```
/monitor/path:/gd1/,/gd2/,/gd3/
```

### 自定义转移方式
```
/monitor/path:/target/path#move
```

### 自定义覆盖方式
```
/monitor/path:/target/path@overwrite
```

## 工作原理

1. **文件监控**: 实时监控指定目录的文件变化
2. **媒体识别**: 自动识别媒体文件类型和信息
3. **网盘检测**: 检测目标网盘的状态（如果启用）
4. **目录选择**: 根据历史记录和轮询策略选择目标目录
5. **文件转移**: 执行文件转移操作
6. **后续处理**: 执行刮削、通知等后续操作

## 故障排除

### 常见问题
1. **插件无法启动**: 检查目录权限和配置
2. **文件转移失败**: 检查目标目录权限和空间
3. **网盘检测失败**: 检查 clouddrive-cli 工具配置

### 日志查看
插件会记录详细的日志信息，包括：
- 文件监控事件
- 网盘状态检测结果
- 文件转移过程
- 错误信息

## 技术支持

如有问题，请查看：
- [CLOUD_CHECK_README.md](CLOUD_CHECK_README.md) - 网盘限制检测功能详细说明
- [CHANGELOG.md](CHANGELOG.md) - 更新日志
- [test_cloud_check.py](test_cloud_check.py) - 功能测试脚本

## 版本信息

- **当前版本**: 2.7.0
- **作者**: leGO9
- **兼容性**: MoviePilot v2+
